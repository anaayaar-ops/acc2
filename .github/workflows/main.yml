name: Continuous Bot Runner

on:
  workflow_dispatch:
  schedule:
    - cron: '0 */4 * * *'

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: Set up Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '20'

    - name: Install dependencies
      run: npm install

    - name: Execution
      env:
        U_MAIL: ${{ secrets.U_MAIL }}
        U_PASS: ${{ secrets.U_PASS }}
        ENTRY_P: ${{ secrets.ENTRY_P }}
        EXIT_P: ${{ secrets.EXIT_P }}
        MATCH_V: ${{ secrets.MATCH_V }}
        EXEC_V: ${{ secrets.EXEC_V }}
      run: |
        # Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø§Ø¹Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ø¨ØªÙˆÙ‚ÙŠØª Ù…ÙƒØ©
        HOUR=$(date +%H -d "+3 hours")
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆÙ‚Øª Ø§Ù„Ø±Ø§Ø­Ø© (Ø¨ÙŠÙ† 4 Ùˆ 8 ØµØ¨Ø§Ø­Ø§Ù‹)
        if [ "$HOUR" -ge 4 ] && [ "$HOUR" -lt 8 ]; then
          echo "ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø±Ø§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.. Ø§Ù„Ø³ÙŠØ±ÙØ± Ø³ÙŠØ¨Ù‚Ù‰ Ù…ØªÙˆÙ‚ÙØ§Ù‹ Ø­ØªÙ‰ Ø§Ù„Ø³Ø§Ø¹Ø© 8 ØµØ¨Ø§Ø­Ø§Ù‹ ğŸ’¤"
          exit 0
        fi
        
        echo "ğŸš€ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙ…Ø±..."
        npm start
